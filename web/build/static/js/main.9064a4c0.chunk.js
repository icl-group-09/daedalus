(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{84:function(e,t,n){},85:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var i,r=n(0),a=n.n(r),c=n(35),s=n.n(c),o=(n(84),n(15)),l=(n(85),n(1)),d=n(2),u=n(10),h=n(68),p=n(69);!function(e){e[e.PCD=0]="PCD",e[e.HM=1]="HM"}(i||(i={}));var b=function(){function e(t,n,i){var r=this;Object(l.a)(this,e),this.renderer=new u.x({alpha:!0,antialias:!0}),this.scene=new u.r,this.camera=void 0,this.currentFile=void 0,this.points=void 0,this.originalPointsColors=void 0,this.camera=new u.n(30,t/n,.01,40),this.renderer=new u.x({canvas:i}),this.initCamera(),this.initRenderer(t,n),this.initControls(),(new u.e).setPath("/").load(["purplenebula_ft.png","purplenebula_bk.png","purplenebula_lf.png","purplenebula_rt.png","purplenebula_up.png","purplenebula_dn.png"],(function(e){var t=new u.b(1e4,1e4,1e4),n=new u.m({envMap:e}),i=new u.l(t,n);r.scene.add(i),r.scene.background=e,r.renderer.render(r.scene,r.camera)}))}return Object(d.a)(e,[{key:"createPathStrings",value:function(e){var t="/"+e;return["ft","bk","up","dn","rt","lf"].map((function(e){return t+"_"+e+".png"}))}},{key:"createMaterialArray",value:function(e){return this.createPathStrings(e).map((function(e){var t=(new u.u).load(e);return new u.m({map:t,side:u.a})}))}},{key:"initSkyBox",value:function(){var e=this.createMaterialArray("purplenebula");console.log(e);var t=new u.b(1e4,1e4,1e4),n=new u.l(t,e);this.scene.add(n)}},{key:"initCamera",value:function(){this.camera.position.set(1200,-250,2e3),this.scene.add(this.camera)}},{key:"initRenderer",value:function(e,t){this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(e,t)}},{key:"initControls",value:function(){var e=this,t=new p.a(this.camera,this.renderer.domElement);t.addEventListener("change",(function(){e.renderScene()})),t.minDistance=.5,t.maxDistance=10}},{key:"resizeRenderer",value:function(e,t){this.camera.aspect=e/t,this.renderer.setSize(e,t)}},{key:"renderPCD",value:function(e,t,n){var i=this;void 0===this.points||e!==this.currentFile?(this.currentFile=e,(new h.a).load("/getPcd/".concat(e,".pcd"),(function(e){void 0!==i.points&&i.scene.remove(i.points),i.points=e,i.originalPointsColors=e.geometry.getAttribute("color"),e.geometry.rotateX(Math.PI),i.setPointsProperties(e,n,t),i.scene.add(e),i.renderScene()}))):(this.setPointsProperties(this.points,n,t),this.renderScene())}},{key:"setPointsProperties",value:function(e,t,n){var r=void 0!==this.originalPointsColors;if(n===i.HM)this.renderHeatMap(e),r=!0;else r&&e.geometry.setAttribute("color",this.originalPointsColors);e.material=new u.p({size:t,vertexColors:r}),e.geometry.center()}},{key:"renderHeatMap",value:function(e){for(var t=e.geometry.attributes.position.count,n=1e6,i=-1e6,r=0;r<t;r++){var a=e.geometry.attributes.position.array[3*r+1];a<n&&(n=a),a>i&&(i=a)}for(var c=i-n,s=[],o=0;o<t;o++){var l=(e.geometry.attributes.position.array[3*o+1]-n)/c,d=new u.d(l,0,1-l);s.push(d.r,d.g,d.b)}e.geometry.setAttribute("color",new u.h(s,3))}},{key:"renderScene",value:function(){this.renderer.render(this.scene,this.camera)}}],[{key:"getInstance",value:function(t,n,i){return e.instance||(e.instance=new e(t,n,i)),e.instance}}]),e}();b.instance=void 0;var v=n(6),f=function(e){var t=e.width,n=e.height,i=e.graphicsHandler,c=e.pcdFilename,s=e.pcdRenderType,o=e.pcdPointSize,l=e.canvas,d={width:"".concat(t,"px"),height:"".concat(n,"px")},u=a.a.createRef();return Object(r.useEffect)((function(){0===u.current.children.length&&u.current.appendChild(l),i.renderPCD(c,s,o),i.resizeRenderer(t,n)})),Object(v.jsx)("div",{className:"gpu-view",style:d,children:Object(v.jsx)("div",{id:"gpu-view-frame",ref:u})})},j=n(138),g=n(135),m=n(136),w=n(134),x=function(e){var t=e.pcd,n=e.setPcd;return Object(v.jsx)("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:Object(v.jsx)("div",{style:{background:"white"},children:Object(v.jsx)(j.a,{sx:{minWidth:120},children:Object(v.jsx)(m.a,{fullWidth:!0,children:Object(v.jsx)(w.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:t,label:"Age",onChange:function(e){n(e.target.value)},children:["online","Rf10","frame_00023"].map((function(e,t){return Object(v.jsx)(g.a,{value:e,children:e},t)}))})})})})})},y=n(72),O=Object(r.createContext)(!0),P=document.createElement("canvas"),C={renderPCD:function(e){},resizeRenderer:function(e,t){}};var k=function(){var e=Object(r.useState)("online"),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(.003),s=Object(o.a)(c,2),l=s[0],d=s[1],u=Object(r.useState)(window.innerWidth),h=Object(o.a)(u,2),p=h[0],j=h[1],g=Object(r.useState)(window.innerHeight),m=Object(o.a)(g,2),w=m[0],k=m[1];window.addEventListener("resize",(function(){return function(e,t){e(window.innerWidth),t(window.innerHeight)}(j,k)}),!1),window.funkyFunc=function(e,t){j(e),k(t)},window.setPcd=function(e){a(e)};var S=Object(r.useState)(i.PCD),D=Object(o.a)(S,2),M=D[0],H=D[1],R=Object(r.useContext)(O)?b.getInstance(p,w,P):C;return Object(v.jsxs)("div",{className:"App",style:{textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(v.jsxs)("div",{className:"controls",style:{position:"absolute",width:"100%",left:"0px",top:"0px",color:"white"},children:[Object(v.jsx)("h1",{children:"Welcome to Daedalus!"}),Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{onClick:function(){H(i.PCD)},children:"Show Point Cloud"}),Object(v.jsx)("button",{onClick:function(){H(i.HM)},children:"Show Heat Map"}),Object(v.jsx)("button",{children:"Show 2D Map"})]}),Object(v.jsx)(x,{pcd:n,setPcd:a}),Object(v.jsx)(y.a,{axis:"x",xmax:.1,xstep:5e-4,xmin:.001,x:l,onChange:function(e){var t=e.x;return d(t)}})]}),Object(v.jsx)(f,{width:p,height:w,graphicsHandler:R,pcdFilename:n,pcdRenderType:M,pcdPointSize:l,canvas:P})]})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,139)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),i(e),r(e),a(e),c(e)}))};s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(k,{})}),document.getElementById("root")),S()}},[[96,1,2]]]);
//# sourceMappingURL=main.9064a4c0.chunk.js.map