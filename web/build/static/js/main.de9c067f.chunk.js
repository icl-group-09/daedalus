(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{86:function(e,t,n){},87:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var i,r=n(0),c=n.n(r),a=n(37),s=n.n(a),o=(n(86),n(16)),d=(n(87),n(1)),l=n(2),u=n(12),h=n(70),j=n(71);!function(e){e[e.PCD=0]="PCD",e[e.HM=1]="HM"}(i||(i={}));var b=function(){function e(t,n){Object(d.a)(this,e),this.renderer=new u.r,this.scene=new u.m,this.camera=void 0,this.camera=new u.i(30,t/n,.01,40),this.initCamera(),this.initRenderer(t,n),this.initControls()}return Object(l.a)(e,[{key:"initCamera",value:function(){this.camera.position.set(0,0,1),this.scene.add(this.camera)}},{key:"initRenderer",value:function(e,t){this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(e,t)}},{key:"initControls",value:function(){var e=this,t=new j.a(this.camera,this.renderer.domElement);t.addEventListener("change",(function(){e.renderScene()})),t.minDistance=.5,t.maxDistance=10}},{key:"resizeRenderer",value:function(e,t){this.camera.aspect=e/t,this.renderer.setSize(e,t)}},{key:"renderPCD",value:function(e,t,n,r){var c=e.children;switch(c.length>0&&e.removeChild(c[c.length-1]),e.appendChild(this.renderer.domElement),n){case i.PCD:this.loadPCD(t,!1,r);break;case i.HM:this.loadPCD(t,!0,r)}this.renderScene()}},{key:"loadPCD",value:function(e,t,n){var i=this;(new h.a).load("/getPcd/".concat(e,".pcd"),(function(e){if(t){for(var r=e.geometry.attributes.position.count,c=1e6,a=-1e6,s=0;s<r;s++){var o=e.geometry.attributes.position.array[3*s+1];o<c&&(c=o),o>a&&(a=o)}for(var d=a-c,l=[],h=0;h<r;h++){var j=(e.geometry.attributes.position.array[3*h+1]-c)/d,b=new u.b(1*(1-j),0,1*j);l.push(b.r,b.g,b.b)}e.geometry.setAttribute("color",new u.e(l,3))}e.material=new u.k({size:n,vertexColors:t}),e.geometry.center(),e.geometry.rotateX(Math.PI),i.scene.add(e),i.renderScene()}))}},{key:"renderScene",value:function(){this.renderer.render(this.scene,this.camera)}}]),e}(),f=n(6),m=function(e){var t=e.width,n=e.height,i=e.graphicsHandler,c=e.pcdFilename,a=e.pcdRenderType,s=e.pcdPointSize,o={width:"".concat(t,"px"),height:"".concat(n,"px")},d=Object(r.useRef)(null);return Object(r.useEffect)((function(){i.renderPCD(d.current,c,a,s),i.resizeRenderer(t,n)})),Object(f.jsx)("div",{className:"gpu-view",style:o,children:Object(f.jsx)("div",{className:"gpu-view-frame",ref:d})})},p=n(143),x=n(141),v=n(139),O=n(140),g=n(138),C=function(e){var t=e.pcd,n=e.setPcd;return Object(f.jsx)(p.a,{sx:{minWidth:120},children:Object(f.jsxs)(O.a,{fullWidth:!0,children:[Object(f.jsx)(x.a,{id:"demo-simple-select-label",children:"PCD"}),Object(f.jsx)(g.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:t,label:"Age",onChange:function(e){n(e.target.value)},children:["online","Rf10","frame_00023"].map((function(e,t){return Object(f.jsx)(v.a,{value:e,children:e},t)}))})]})})},w=n(74),P=Object(r.createContext)(!0),y={renderPCD:function(e,t){},resizeRenderer:function(e,t){}};var D=function(){var e=Object(r.useState)("online"),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(.003),s=Object(o.a)(a,2),d=s[0],l=s[1],u=Object(r.useState)(800),h=Object(o.a)(u,2),j=h[0],p=h[1],x=Object(r.useState)(800),v=Object(o.a)(x,2),O=v[0],g=v[1];window.funkyFunc=function(e,t){p(e),g(t)},window.setPcd=function(e){c(e)};var D=Object(r.useState)(i.PCD),S=Object(o.a)(D,2),k=S[0],R=S[1],z=Object(r.useContext)(P)?new b(j,O):y;return Object(f.jsxs)("div",{className:"App",style:{textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(f.jsx)("h1",{children:"Welcome to Daedalus!"}),Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{onClick:function(){R(i.PCD)},children:"Show Point Cloud"}),Object(f.jsx)("button",{onClick:function(){R(i.HM)},children:"Show Heat Map"}),Object(f.jsx)("button",{children:"Show 2D Map"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)(C,{pcd:n,setPcd:c}),Object(f.jsx)(w.a,{axis:"x",xmax:.01,xstep:5e-4,xmin:.001,x:d,onChange:function(e){var t=e.x;return l(t)}})]}),Object(f.jsx)(m,{width:j,height:O,graphicsHandler:z,pcdFilename:n,pcdRenderType:k,pcdPointSize:d})]})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,144)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),i(e),r(e),c(e),a(e)}))};s.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(D,{})}),document.getElementById("root")),S()}},[[98,1,2]]]);
//# sourceMappingURL=main.de9c067f.chunk.js.map